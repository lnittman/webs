<?xml version="1.0" encoding="UTF-8"?>
<prompt>
  <metadata>
    <tool_id>filter_links</tool_id>
    <prompt_version>1.0</prompt_version>
    <purpose>Filter and prioritize links from a webpage based on relevance.</purpose>
  </metadata>

  <task>
    <objective>Select the most relevant links to explore further based on the current context.</objective>
  </task>

  <context>
    <source>{{sourceUrl}}</source>
    <summary>{{context}}</summary>
    <query>{{query}}</query>
  </context>

  <instructions>
    <step>Analyze the current context and available links.</step>
    <step>Evaluate each link for relevance to the context and query.</step>
    <step>Select up to {{maxLinks}} links that would provide the most valuable additional information.</step>
  </instructions>

  <criteria>
    <criterion>Links that provide new insights not covered in the current context.</criterion>
    <criterion>Links that expand on important concepts mentioned briefly.</criterion>
    <criterion>Links that provide complementary perspectives on the topic.</criterion>
    <criterion>Links to official documentation or authoritative sources.</criterion>
  </criteria>

  <constraints>
    <avoid>Social media links.</avoid>
    <avoid>Login/signup pages.</avoid>
    <avoid>Terms of service or privacy policy pages.</avoid>
    <avoid>Marketing or sales pages.</avoid>
    <avoid>Pages with minimal relevant content.</avoid>
  </constraints>

  <output_format>
    <description>JSON array of strings containing only the relevant URLs.</description>
    <requirement>Valid, parseable JSON array format.</requirement>
    <max_links>{{maxLinks}}</max_links>
  </output_format>
  
  <links>
    {{linksText}}
  </links>
</prompt> 